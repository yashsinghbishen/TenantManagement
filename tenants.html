{% load staticfiles%}

{% if tenantlist %}
<table class="table fixed_header">
    <thead>
         <tr class="success">
            <th>Name</th>
            <th>Contact</th>
            <!-- <th colspan="2">Email</th> -->
            <th colspan="2">Address</th>
            <th>Profile</th>
            <th>Tenant Document</th>                                       
            <th>Status</th>
            <th>Visit</th>
            <th>Property</th>                                        
            <th>Operation</th>
        </tr>
    </thead>
    <tbody>
        {% for tenant in tenantlist %}

        <tr>
            <td><a data-toggle="tooltip" title="View Details"  href="{% url 'TenantDetails' tenant.id %}">{{ tenant.tn_name }}</a></td>
            <td>{{ tenant.tn_contact }}</td>
            <!-- <td colspan="2">{{ tenant.email }}</td> -->
            <td colspan="2">{{ tenant.tn_permanent_address }}</td>

            <td>
                <img id='p_image' class="pimg" src="{{ MEDIA_URL }}{{ tenant.tn_profile }}"
                    style="height:50px; width:100px;"
                    alt="{{tenant.tn_name}}'s Profile Picture">
                <div id="imgDiv" class="modal2">
                    <span class="close">&times;</span>
                    <img class="modal2-content" id="img01">
                    <div id="caption"></div>
                </div>
            </td>

            <td>
                <img class="pimg" src="{{ MEDIA_URL }}{{ tenant.tn_document }}"
                    style="height:50px; width:100px;" alt="{{tenant.tn_name}}'s Document">
                <div id="imgDiv" class="modal2">
                    <span class="close">&times;</span>
                    <img class="modal2-content" id="img01">
                    <div id="caption"></div>
                </div>
            </td>
            
            <td>
                <a href="" data-toggle="tooltip" title="Change Status">
                {% if tenant.tn_status == 0 %}Property Not Allocated{% elif tenant.tn_status == 1 %}Visit to property{% elif tenant.tn_status == 2 %}deal Accepted aggrement under process
                {% elif tenant.tn_status == 3 %}Staying in our house{% endif %}
                </a>
            </td>
            <td>
                <a data-tid="{{ tenant.id }}" data-toggle="tooltip" title="Add Property Visit" class="addvisit">Add Visit</a></div>
            </td>
            <td>
                {% if tenant.tn_status == 3 %}
                <button data-tid="{{ tenant.id }}" class="btn btn-success btn-rounded btn-small deallocate_tenant">Deallocate</button>
                {% endif %}
                {% if tenant.tn_status != 3 %}
                <button data-tid="{{ tenant.id }}"  class="btn btn-success btn-rounded btn-small allocate_tenant">Allocate</button>
                {% endif %}
            </td>
            <td>
                <form method="POST" action="{% url 'change_tenant_status' %}">

                    {% csrf_token %}
                    <input type="hidden" name="tid" value="{{ tenant.id }}">
                    <input type="submit" name="submit" class="btn btn-danger btn-small btn-rounded"
                        {% if tenant.tn_is_active == True %} value="Remove" {% else %}
                        value="Add Again" {% endif %}>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% else %}

There are No Tenants
{% endif %}

